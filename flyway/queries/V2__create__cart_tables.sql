-- Create Carts Table
CREATE TABLE carts (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    client_id BIGINT NOT NULL,
    subtotal NUMERIC(19, 2),
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);

-- Create Afterwards Table
CREATE TABLE afterwards (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    cart_id BIGINT,
    product_id BIGINT,
    product_name VARCHAR(255),
    product_price NUMERIC(19, 2),
    quantity INT,
    item_total NUMERIC(19, 2),
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    moved_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    client_id BIGINT,
    FOREIGN KEY (cart_id) REFERENCES carts(id) ON DELETE CASCADE
);

-- Create Cart Items Table
CREATE TABLE cart_items (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    cart_id BIGINT,
    product_id BIGINT,
    product_name VARCHAR(255),
    product_price NUMERIC(19, 2),
    quantity INT,
    item_total NUMERIC(19, 2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (cart_id) REFERENCES carts(id) ON DELETE CASCADE
);


INSERT INTO carts (client_id, subtotal, created_at, updated_at) VALUES
(1, 35.97, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, 83.96, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, 45.94, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(4, 15.97, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(5, 56.97, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);


INSERT INTO cart_items (cart_id, product_id, product_name, product_price, quantity, item_total, created_at, updated_at) VALUES
(1, 1, 'Extra Strength Tylenol', 9.99, 2, 19.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(1, 2, 'Neutrogena Hydro Boost', 15.99, 1, 15.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, 3, 'Pampers Swaddlers', 24.99, 3, 74.97, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(2, 4, 'Robitussin Cough Syrup', 8.99, 1, 8.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, 5, 'Centrum Adult Multivitamin', 12.99, 2, 25.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(3, 6, 'Band-Aid Flexible Fabric Adhesive Bandages', 4.99, 4, 19.96, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(4, 7, 'Colgate Total Whitening Toothpaste', 3.99, 2, 7.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(4, 8, 'Advil Liqui-Gels', 7.99, 1, 7.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(5, 9, 'Cetaphil Gentle Skin Cleanser', 10.99, 1, 10.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP),
(5, 10, 'Huggies Little Snugglers', 22.99, 2, 45.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);


INSERT INTO afterwards (cart_id, product_id, product_name, product_price, quantity, item_total, created_at, updated_at, client_id) VALUES
(1, 1, 'Extra Strength Tylenol', 9.99, 2, 19.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 1),
(1, 2, 'Neutrogena Hydro Boost', 15.99, 1, 15.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 1),

(2, 3, 'Pampers Swaddlers', 24.99, 3, 74.97, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 2),
(2, 4, 'Robitussin Cough Syrup', 8.99, 1, 8.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 2),

(3, 5, 'Centrum Adult Multivitamin', 12.99, 2, 25.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 3),
(3, 6, 'Band-Aid Flexible Fabric Adhesive Bandages', 4.99, 4, 19.96, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 3),

(4, 7, 'Colgate Total Whitening Toothpaste', 3.99, 2, 7.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 4),
(4, 8, 'Advil Liqui-Gels', 7.99, 1, 7.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 4),

(5, 9, 'Cetaphil Gentle Skin Cleanser', 10.99, 1, 10.99, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 5),
(5, 10, 'Huggies Little Snugglers', 22.99, 2, 45.98, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP, 5);
